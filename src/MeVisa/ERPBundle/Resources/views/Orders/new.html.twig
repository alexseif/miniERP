{% extends ':default:admin.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="/css/chosen.min.css" />
    <style type="text/css">
        .panel .form-group{ margin-bottom: 5px;}
        .panel-body{font-size: 11px;}
        .panel-body label{font-weight: 550}
        .panel .control-label{padding-left: 5px; padding-right: 5px;}
    </style>
    <style type="text/css">
        .checkbox input[type="checkbox"]{margin-top: 0px;}
        .list-group-item{padding-top: 2px;padding-bottom: 2px}
        .badge{margin-top: 5px;}
    </style>
{% endblock %}
{% block content %}
{#    {{ form_start(form, {'attr':{'class':'form-group-sm'} }) }}#}
    {{ form_start(form}) }}
    {{ form_row(form._token) }}
    {{ form_errors(form) }}
    <div class="panel panel-default">
        <div class="panel-heading clearfix">
            <span class="panel-title">New Order</span>
            <div class="pull-right">
                <span class="label label-default">Channel {{ order.channel }}</span>
                &nbsp;<span class="label label-default">State {{ order.state }}</span>
                &nbsp;<span class="label label-default"> {{ order.createdAt|date() }}</span>
            </div>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-4">
                    {{ form_widget(form.customer)}}
                </div>
                <div class="col-sm-4">
                    <ul class="list-group">
                        <li class="list-group-item">                                
                            <span class="badge">2050 RUB</span>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox"/> UAE
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <span class="badge">2050 RUB</span>
                            <div class="checkbox">

                                <label>
                                    <input type="checkbox"/>UAE Urgent
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <span class="badge">2050 RUB</span>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox"/>Singapore
                                </label>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <span class="badge">2050 RUB</span>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" />Marhaba Bronze
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <span class="badge">2050 RUB</span>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox"/> Marhaba Gold 
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <span class="badge">2050 RUB</span>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox"/>Marhaba Family
                                </label>
                            </div>
                        </li>
                    </ul>
                </div>
                {#<div class="col-sm-4">
                    {{ form_row(form.customer.email) }}
                </div>
                <div class="col-sm-4">
                    {{ form_row(form.customer.phone) }}
                </div>#}
            </div>
            <div class="row">
                <div class="col-sm-3">
                    {{ form_label(form.orderProducts.vars.prototype.quantity) }}
                    {{ form_widget(form.orderProducts.vars.prototype.quantity) }}
                </div>
            </div>
            <hr/>
            <!-- Customer -->
            {#            <div class="panel panel-default">
                            <div class="panel-heading">
                                <span class="panel-title">Customer</span>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-sm-4">
                                        {{ form_row(form.customer.name)}}
                                    </div>
                                    <div class="col-sm-4">
                                        {{ form_row(form.customer.email) }}
                                    </div>
                                    <div class="col-sm-4">
                                        {{ form_row(form.customer.phone) }}
                                    </div>
                                </div>
                            </div>
                        </div>
              #}          <!-- Order details -->
            <!-- Companions -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="panel-title">Companions</span>
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered table-hover records_list">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>PAX</th>
                                <th>Passport #</th>
                                <th>Passport Exp</th>
                            </tr>
                        </thead>
                        <tbody class="companions" data-prototype="{{ '<td>' ~ form_widget(form.orderCompanions.vars.prototype.name) ~ '</td>' 
~ '<td>' ~ form_widget(form.orderCompanions.vars.prototype.pax) ~ '</td>'
~ '<td>' ~ form_widget(form.orderCompanions.vars.prototype.passportNumber) ~ '</td>'
~ '<td>' ~ form_widget(form.orderCompanions.vars.prototype.passportExpiry) ~ '</td>' }}">
                            {#                            
                                                         TODO: Expiry date initial this month 
                                                        {{ form_widget(form.customer.passportExpiry.day, {'attr': { 'style': 'display:none' } }) }}
                                                        {{ form_row(form.customer.passportExpiry) }}
                                                        // {{ form_widget(form.customer.vars.prototype.passportExpiry.year) }}
                            #}
                        </tbody>
                    </table>
                </div>
                {#                <div class="panel-body">#}
                {#                    <a href="#" class="btn btn-block addCompanion" id="add-companion"><span class="glyphicon glyphicon-plus"></span></a>#}
                {#                </div>#}
                <div class="panel-footer">
                    <div class="row">
                        <div class="col-sm-4">
                            {# <span class="label label-primary" style="font-size: 14px;">RUB Subtotal</span>#}
                            {{ form_row(form.productsTotal) }}
                        </div>
                        <div class="col-sm-2"></div>
                        <div class="col-sm-6">{{ form_row(form.adjustmentTotal) }}</div>
                    </div>
                </div>
            </div>
            <!-- Payment details -->

            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="panel-title">Payment details</span>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-3 col-sm-offset-1">
                            {{ form_widget(form.payments.vars.prototype.method) }}
                        </div>
                        <div class="col-sm-8">
                            {{ form_row(form.payments.vars.prototype.amount) }}
                            {{ form_row(form.payments.vars.prototype.detail) }}
                        </div>
                    </div>
                </div>
            </div>
            <!-- Comments -->
            <div class="panel panel-default">
                <div class="panel-heading clearfix">
                    <span class="panel-title">Notes</span>
                    <div class="pull-right">
                        <span class="label label-default">Author</span>
                        {#{{ form_widget(form.comments.vars.prototype.author) }}#}
                    </div>
                </div>
                <div class="panel-body">
                    {{ form_widget(form.comments.vars.prototype.comment) }}
                </div>
            </div>
            <!-- Comments -->
        </div>
        <!-- panel body -->
        <div class="panel-footer">
            <div class="row">
                <div class="col-sm-4">{{ form_row(form.total) }}</div>
                <div class="col-sm-6"></div>
                <div class="col-sm-2">{{ form_row(form.submit) }}</div>
            </div>
        </div>
    </div>
    {{ form_end(form, {'render_rest': false}) }}
    <div class="pull-right"><a class="btn btn-warning" href="{{ path('orders') }}">Cancel</a></div>
    <!-- /.row -->
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="/js/chosen.jquery.min.js"></script>
    <script type="text/javascript" src="/js/orders.js"></script>
    <script type="text/javascript">
        var products = new Array();{% for price in productPrices %}
                products[{{ price.product.id }}] =
                [{
                id:{{ price.id }},
                        price:{{ price.price }},
                }];{% endfor %}
    </script>
{% endblock %}
